# çˆ¶å­ç»„ä»¶é€šè®¯

## çˆ¶ä¼ å­

çˆ¶ä¼ å­ï¼Œä¾æ—§éœ€è¦åœ¨å­ç»„ä»¶æ ‡ç­¾ä¸­ç»‘å®šå±æ€§è¿›è¡Œ props çš„ä¼ é€’ï¼Œå­ç»„ä»¶ä¹Ÿä¾ç„¶è¦é€šè¿‡é…ç½® props é€‰é¡¹æ¥è¿›è¡Œæ¥æ”¶ï¼Œæœ€å…³é”®çš„æ˜¯å¦‚ä½•åœ¨ setup ä¸­è¿›è¡Œè®¿é—®ã€‚

ä¹‹å‰æˆ‘ä»¬äº†è§£è¿‡ setup æ¥æ”¶ä¸¤ä¸ªå‚æ•°

* props
* context

æ²¡é”™ï¼Œå°±æ˜¯é€šè¿‡ props å‚æ•°è®¿é—®çˆ¶ç»„ä»¶ä¼ å…¥çš„æ•°æ®ï¼Œä½†åœ¨ä½¿ç”¨æ—¶ï¼Œæœ‰ä¸€äº›æ³¨æ„ç‚¹ï¼š

* ç”±äº props æ˜¯ä¸€ä¸ª Proxy å¯¹è±¡ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥è¿›è¡Œè§£æ„ï¼ˆä¼šå¤±å»å“åº”å¼ï¼‰
  * å¯ä»¥ä½¿ç”¨ toRefs è½¬åŒ–åè¿›è¡Œé€ä¸€è§£æ„ã€‚
* ç¦æ­¢åœ¨å­ç»„ä»¶ä¸­æ›´æ”¹çˆ¶ç»„ä»¶æ‰€ä¼ å…¥çš„ propsï¼Œå› ä¸ºå¦‚æœ props ä¸­çš„æŸäº›çŠ¶æ€æ˜¯ `å¼•ç”¨ç±»å‹æ•°æ®`ï¼Œåˆ™ä¼šç›´æ¥å½±å“çˆ¶ç»„ä»¶ä»¥åŠå…¶å®ƒä¾èµ–è¯¥ props çš„å­ç»„ä»¶ã€‚

è¿™é‡Œç”¨ä¸€ä¸ªç®€å•çš„æ¡ˆä¾‹æ¥åŠ æ·±å°è±¡

**App.vue**

```
<template>
  <main>
    <h2>{{ title }}</h2>
    <Child :list="list" />
  </main>
</template>
<script>
  import { defineComponent, reactive, toRefs } from "vue";
  import Child from "./Child.vue";
  export default defineComponent({
    components: {
      Child,
    },
    setup() {
      const state = reactive({
        title: "App",
        list: ["æ–°é—»", "å¨±ä¹", "ç§‘æŠ€"],
      });

      return {
        ...toRefs(state),
      };
    },
  });
</script>
```

**Child.vue**

```
<template>
  <div>
    <h3>{{ title }}</h3>
    <hr />
    <p>çˆ¶ç»„ä»¶ä¼ å…¥çš„props</p>
    <ul>
      <li v-for="val in parent.list" :key="val">{{ val }}</li>
    </ul>
  </div>
</template>
<script>
  import { defineComponent, reactive, toRefs } from "vue";

  export default defineComponent({
    props: {
      list: {
        type: Array,
        default: () => [],
      },
    },
    setup(props) {
      const state = reactive({
        title: "æˆ‘æ˜¯childç»„ä»¶",
      });
      console.log(props);
      /*
        ç”±äºpropsæ˜¯ä¸€ä¸ªProxyå¯¹è±¡ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥è¿›è¡Œè§£æ„ï¼Œ
        å¯ä»¥ä½¿ç”¨toRefsè½¬åŒ–åè¿›è¡Œé€ä¸€è§£æ„ã€‚
      */
      // let { list } = props;
      let { list } = toRefs(props);

      console.log(list.value);
      const parent = {
        list: list.value,
      };

      return {
        ...toRefs(state),
        parent,
      };
    },
  });
</script>
```

## å­ä¼ çˆ¶

åœ¨ Vue2.x ä¸­æˆ‘ä»¬éœ€è¦é€šè¿‡ `this.$emit` å®Œæˆå­ä¼ çˆ¶ï¼Œä½† Vue3 ä¸­çš„ `setup` ä¸èƒ½è®¿é—® `this`ï¼Œé‚£è¦æ€ä¹ˆå®ç°å‘¢ï¼Ÿ

* é€šè¿‡ setup çš„ç¬¬äºŒä¸ªå‚æ•° `context` è¿›è¡Œè®¿é—®ã€‚

  * **context åŒ…å«å“ªäº›å¯è®¿é—®é€‰é¡¹å‘¢ï¼Ÿ**

    æ‰§è¡Œ `setup` æ—¶ï¼Œç»„ä»¶å®ä¾‹å°šæœªè¢«åˆ›å»ºã€‚å› æ­¤ï¼Œä½ åªèƒ½è®¿é—®ä»¥ä¸‹ propertyï¼š

    - `props`
    - `attrs`
    - `slots`
    - `emit`

    æ¢å¥è¯è¯´ï¼Œä½ **å°†æ— æ³•è®¿é—®**ä»¥ä¸‹ç»„ä»¶é€‰é¡¹ï¼š

    - `data`
    - `computed`
    - `methods`

* ç”±äº context æ•°æ®ä¸æ˜¯å“åº”å¼çš„ï¼Œæ‰€ä»¥å¯ä»¥è§£æ„æƒ³è¦ä½¿ç”¨çš„åŠŸèƒ½å‡½æ•°ã€‚

è¿™é‡Œç”¨ä¸€ä¸ªç®€å•çš„æ¡ˆä¾‹æ¥åŠ æ·±å°è±¡ğŸ‘‡

**App.vue**

```
<template>
  <main>
    <h2>{{ title }}</h2>
    <Child v-show="isShow" @hidden="hiddenChild" />
  </main>
</template>
<script>
  import { defineComponent, reactive, toRefs } from "vue";
  import Child from "./Child.vue";
  export default defineComponent({
    components: {
      Child,
    },
    setup() {
      const state = reactive({
        title: "App",
        isShow: true,
      });

      const hiddenChild = (isShow) => {
        state.isShow = isShow;
      };
      return {
        ...toRefs(state),
        hiddenChild,
      };
    },
  });
</script>
```

**Child.vue**

```
<template>
  <div>
    <h3>{{ title }}</h3>
    <hr />
    <button @click="hidden">ç‚¹æˆ‘éšè—</button>
  </div>
</template>
<script>
  import { defineComponent, reactive, toRefs } from "vue";

  export default defineComponent({
    setup(props, { emit }) {
      const state = reactive({
        title: "æˆ‘æ˜¯childç»„ä»¶",
      });

      const hidden = () => {
        emit("hidden", false);
      };
      return {
        ...toRefs(state),
        hidden,
      };
    },
  });
</script>
```

# provide & inject

<img src="ç»„ä»¶ä¹‹é—´çš„é€šè®¯.assets/001.jpg" alt="001" style="zoom:50%;" />

å‰é¢è®²åˆ°äº†çˆ¶å­ç»„ä»¶çš„é€šè®¯ï¼Œä½†å¦‚æœ component å±‚çº§åµŒå¥—å¾ˆæ·±ï¼Œå°±æ„å‘³ç€è¦é€å±‚è¿›è¡Œ state çš„ä¼ é€’ï¼Œè¿™ä¼šæœ‰ä¸€äº›ä¸å¥½çš„å½±å“ï¼š

* å®ç°è¿‡ç¨‹ç¹çã€‚
* è¿˜ä¼šå¯¼è‡´ä¸­é—´ç»„ä»¶è¢«è¿«æ¥æ”¶state
* ä»£ç è‡ƒè‚¿

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `provide`ã€`inject` è§£å†³ï¼š

* `provide`å¯ä»¥å°†çˆ¶ç»„ä»¶ä¸­çš„çŠ¶æ€å…±äº«ç»™åä»£ç»„ä»¶ï¼Œè¯¥çŠ¶æ€å¯ä»¥æ˜¯æ™®é€šå˜é‡ã€æ–¹æ³•ã€‚
* åä»£ç»„ä»¶é€šè¿‡ `inject` å°† `provide` å…±äº«çš„çŠ¶æ€æ³¨å…¥ã€‚

 `provide`ã€`inject` åˆ†åˆ«æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š

1. å¯¼å…¥ `provide`ã€`inject` åŠŸèƒ½å‡½æ•°
2. é…ç½® `provide`ã€`inject` é€‰é¡¹

## ä½¿ç”¨åŠŸèƒ½å‡½æ•°

**provide**

```
provide("stateName",state)
```

* stateName
  * å®šä¹‰å…±äº«çŠ¶æ€çš„åç§°ï¼Œåä»£ç»„ä»¶å°±æ˜¯é€šè¿‡è¯¥åç§°è®¿é—®å¯¹åº”çš„çŠ¶æ€
* state
  * è¦å…±äº«çš„ stateï¼Œå¯ä»¥æ˜¯æ™®é€šå˜é‡ï¼Œä¹Ÿå¯æ˜¯æ–¹æ³•ã€‚

**inject**

```
const state = inject("stateName",defaultValue)
```

* ä¼ å…¥ stateName å³å¯è®¿é—®å¯¹åº”çš„å…±äº«çŠ¶æ€ï¼Œå¯é€šè¿‡ç¬¬äºŒä¸ªå¯é€‰å‚æ•°å®šä¹‰é»˜è®¤å€¼ã€‚
* è¿™äº›å…±äº«çŠ¶æ€æ˜¯**åªè¯»çš„**ï¼Œå¦‚æœå°è¯•æ›´æ”¹ï¼Œä¼šæŠ¥é”™ã€‚

### æ¡ˆä¾‹ä½“éªŒ

å…±æœ‰ä¸‰ä¸ªç»„ä»¶ï¼Œå…¶åµŒå¥—å…³ç³»ä¸ºï¼š

* App
  * Child
    * Grandson

é€šè¿‡ `provide & inject` è®© App ä¸ Grandson ç›´æ¥é€šè®¯ï¼Œå½“åœ¨ Grandson ä¸­ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œé€šè¿‡ App çš„äº‹ä»¶è®© Child éšè—ã€‚

**App.vue**

```
<template>
  <main>
    <h2>{{ title }}</h2>
    <Child v-show="isShow" />
  </main>
</template>
<script>
  import { defineComponent, reactive, toRefs, provide } from "vue";
  import Child from "./Child.vue";

  export default defineComponent({
    components: {
      Child,
    },
    setup() {
      const state = reactive({
        title: "App",
        isShow: true,
      });

      const changeIsShow = (isShow) => {
        console.log(isShow);
        state.isShow = isShow;
      };
      //å…±äº«çŠ¶æ€
      provide("changeIsShow", changeIsShow);
      provide("title", state.title);
      return {
        ...toRefs(state),
      };
    },
  });
</script>
<style scoped>
  main {
    background: pink;
  }
</style>
```

**Child.vue**

```
<template>
  <div>
    <h3>{{ title }}</h3>
    <hr />
    <grandson />
  </div>
</template>
<script>
  import { defineComponent, reactive, toRefs } from "vue";
  import Grandson from "./Grandson.vue";
  export default defineComponent({
    components: {
      Grandson,
    },
    setup(props, { emit }) {
      const state = reactive({
        title: "æˆ‘æ˜¯childç»„ä»¶",
      });

      return {
        ...toRefs(state),
      };
    },
  });
</script>
<style scoped>
  div {
    background: yellowgreen;
  }
</style>
```

**Grandson.vue**

```
<template>
  <div id="Grandson">
    <h3>{{ title }}</h3>
    <hr />
    <button @click="hidden">ç‚¹æˆ‘éšè—</button>
  </div>
</template>
<script>
  import { defineComponent, reactive, toRefs, inject } from "vue";

  export default defineComponent({
    setup(props) {
      const state = reactive({
        title: "æˆ‘æ˜¯Grandsonç»„ä»¶",
      });
			//æ³¨å…¥å…±äº«å˜é‡
      const hidden = inject("changeIsShow").bind(null,false);
      //æ‰“å°ç»“æœå¯çŸ¥ï¼Œå°±æ˜¯Appç»„ä»¶å…±äº«çš„å‡½æ•°
      console.log(hidden);
      
      return {
        ...toRefs(state),
        hidden,
      };
    },
  });
</script>
<style scoped>
  #Grandson {
    background: #e67e22;
    margin: 5px;
  }
</style>
```

### ä½¿ç”¨æ³¨æ„é¡¹

`provide & inject`å·¥å…·å‡½æ•°ï¼Œåœ¨ä½¿ç”¨æ—¶æœ‰ä¸€äº›æ³¨æ„é¡¹ï¼Œè¿™é‡Œå…ˆæ±‡æ€»ä¸€ä¸‹ï¼š

1. `provide`å…±äº«çš„çŠ¶æ€æ˜¯**åªè¯»çš„**ï¼Œå¦‚æœåä»£ç»„ä»¶ä½¿ç”¨ `inject` æ¥æ”¶åè¿›è¡Œæ›´æ”¹ä¼šæŠ¥é”™ã€‚
2. ä¸¤è€…éƒ½ **åªèƒ½** åœ¨å½“å‰æ´»åŠ¨å®ä¾‹çš„ `setup()` æœŸé—´è°ƒç”¨

**æ³¨æ„äº‹é¡¹1** 

â€‹	æ‹¿ä¸Šæ–‡æ¡ˆä¾‹æ¥è¯´ï¼Œåœ¨åä»£ç»„ä»¶å®šä¹‰`hidden`å˜é‡ï¼Œæ¥æ”¶`changeIsShow`å…±äº«æ–¹æ³•ã€‚ä½†å¦‚æœåœ¨åæœŸå¯¹hiddenè¿›è¡Œæ›´æ”¹ï¼Œä¼šæŠ¥é”™ï¼Œå‘ŠçŸ¥ä½ è¿™äº›çŠ¶æ€æ˜¯`readonly`ã€‚

**æ³¨æ„äº‹é¡¹2**

â€‹	`provide & inject` **åªèƒ½**åœ¨å½“å‰æ´»åŠ¨å®ä¾‹çš„ `setup()` æœŸé—´è°ƒç”¨ã€‚

è¿™ä¸ªç‰¹ç‚¹å¾ˆé‡è¦ï¼Œä¾‹å¦‚ï¼šåœ¨åä»£ç»„ä»¶ç‚¹å‡»æŒ‰é’®åï¼Œé™¤äº†æ‰§è¡Œå…±äº«æ–¹æ³•`changeIsShow`ï¼Œæˆ‘è¿˜æƒ³è¿›è¡Œä¸€äº›æ“ä½œç”¨äºç»´æŠ¤è¯¥åä»£ç»„ä»¶ï¼Œæ­¤æ—¶ä½ å¯èƒ½ä¼šå†™å‡ºä¸‹ä¾‹ä»£ç ï¼š

```
const hidden = () => {
	//å…±äº«æ–¹æ³•æ‰§è¡Œ
  inject("changeIsShow").call(null, false);
  //å…¶ä»–æ“ä½œ
  â€¦â€¦
};
```

ä½†å¾ˆé—æ†¾ï¼Œè¿™ç§æ“ä½œä¸èƒ½å¥æ•ˆï¼ŒåŸå› å°±æ˜¯`provide&inject`**åªèƒ½**åœ¨å½“å‰æ´»åŠ¨å®ä¾‹çš„ `setup()` æœŸé—´è°ƒç”¨ã€‚å°†å…¶å°è£…åˆ°äº‹ä»¶ä¸­ä¹Ÿä¸å¯ä»¥ï¼Œå› ä¸ºå½“ä¸è§†å›¾äº¤äº’è§¦å‘è¯¥äº‹ä»¶æ—¶ï¼Œå·²ç»æ˜¯æŒ‚è½½åäº†ã€‚

ä¸è¿‡æˆ‘ä»¬å¯ä»¥å°†å…¶ä»–æ“ä½œéƒ¨åˆ†æŠ½ç¦»åˆ°å¦ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œç„¶åä¾¦å¬å¤šä¸ª`click`äº‹ä»¶å³å¯ã€‚

* å„ä¸ªäº‹ä»¶å¿…é¡»æ˜¯ **å‡½æ•°è°ƒç”¨å½¢å¼**ï¼Œè¿™å°±æ„å‘³ç€**å‚æ•°ä¼ é€’**è¦åœ¨ template ä¸­å®Œæˆã€‚
* å„ä¸ªäº‹ä»¶ä¹‹é—´ä½¿ç”¨ `;` éš”å¼€ã€‚

```
<template>
â€¦â€¦
    <button
      @click="
        hidden(false);
        testEvent();
      "
    >
      ç‚¹æˆ‘éšè—
    </button>
â€¦â€¦
</template>
<script>
  import { defineComponent, reactive, toRefs, inject } from "vue";

  export default defineComponent({
    setup(props, { emit }) {
      const state = reactive({
        title: "æˆ‘æ˜¯Grandsonç»„ä»¶",
      });

      const hidden = inject("changeIsShow");
      const title = inject("title", "Ashuntefannao");

      const testEvent = () => {
        console.log(title);
      };

      return {
        ...toRefs(state),
        hidden,
        testEvent,
      };
    },
  });
</script>
```

### å…±äº«å¤šä¸ªæ•°æ®

â€‹	é€šè¿‡ä¸Šæ–‡è®²è§£å¯çŸ¥ï¼Œå½“å…±äº«çš„æ•°æ®æ¯”è¾ƒå¤šæ—¶ï¼Œ`provide & inject` å·¥å…·å‡½æ•°çš„ä½¿ç”¨è¿‡ç¨‹ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬éœ€è¦å¤šæ¬¡è°ƒç”¨ä¸¤ä¸ªå·¥å…·å‡½æ•°ã€‚

å¦‚æœè¦å…±äº«å¤šä¸ªæ•°æ®ï¼Œå¯ä»¥å°†è¿™äº›æ•°æ®æ”¾å…¥ä¸€ä¸ªå¯¹è±¡ä¸­å…±äº«ã€‚

å°±æ‹¿ä¸Šæ–‡ä¸­çš„æ¡ˆä¾‹æ¥è¯´ï¼š

before

```
//å…±äº«çŠ¶æ€
provide("changeIsShow", changeIsShow);
provide("title", state.title);

//æ³¨å…¥çŠ¶æ€
const hidden = inject("changeIsShow");
const title = inject("title", "Ashuntefannao");
```

after

```
//å…±äº«çŠ¶æ€
provide("appProvider", {
  changeIsShow,
  title: state.title,
});

//æ³¨å…¥çŠ¶æ€
const { changeIsShow, title } = inject("appProvider");
```

## é…ç½®ä¸º option

é™¤äº†åœ¨ setup ä¸­è°ƒç”¨ `provide`ã€`inject` åŠŸèƒ½å‡½æ•°ï¼Œå®ç°æ•°æ®å…±äº«ã€‚è¿˜å¯å°†äºŒè€…é…ç½®ä¸ºç»„ä»¶çš„ `option` å®Œæˆç›¸åŒåŠŸèƒ½ã€‚

**provide**

```
provide: {
  title: "App",
  message: "Appå…±äº«çš„æ•°æ®",
  changeShow: () => {
    console.log("changeShow");
  },
}
```

**inject**

```
inject: ["title", "message", "changeShow"],
```

### å…±äº«ç»„ä»¶å®ä¾‹æ•°æ®

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`provide` option ä¸èƒ½å…±äº«ç»„ä»¶å®ä¾‹ä¸­çš„æ•°æ®ï¼ˆä¸èƒ½è®¿é—®thisï¼‰

è‹¥è¦å…±äº«ç»„ä»¶å®ä¾‹ä¸­çš„æ•°æ®ï¼ˆè®¿é—®thisï¼‰ï¼Œéœ€è¦å°† provide é…ç½®ä¸ºï¼š**è¿”å›ä¸€ä¸ªå¯¹è±¡çš„å‡½æ•°**ã€‚

```
export default defineComponent({
  data() {
    return {
      title: "App",
      isShow: true,
    };
  },
  methods: {
    changeShow() {
      this.isShow = !this.isShow;
    },
  },
  //è‹¥è¦å…±äº«ç»„ä»¶å®ä¾‹ä¸­çš„æ•°æ®ï¼ˆè®¿é—®thisï¼‰ï¼Œéœ€è¦å°†provideé…ç½®ä¸ºï¼šè¿”å›ä¸€ä¸ªå¯¹è±¡çš„å‡½æ•°ã€‚
  provide() {
    return {
      changeShow: this.changeShow,
      title: "App",
      message: "Appå…±äº«çš„æ•°æ®",
    };
  },
});
```

### ç¼ºç‚¹

å°† `provide`ã€`inject` ä½œä¸º option é…ç½®åˆ°ç»„ä»¶å®ä¾‹ä¸Šï¼Œå°†ä¸èƒ½å¾ˆå¥½çš„ä¸ setup ç»“åˆï¼Œæ­¤æ—¶å°†ä¸èƒ½å…±äº« setup ä¸­çš„æ•°æ®ã€‚

è¿™ç§ä½¿ç”¨æ–¹å¼å¾ˆé€‚åˆä¼ ç»Ÿçš„ optionsAPI ï¼Œå¦‚æœè¦ä¸ CompositionAPI ç»“åˆï¼Œæœ€å¥½ä½¿ç”¨ **åŠŸèƒ½å‡½æ•°** çš„å½¢å¼ã€‚

---

å½“ç„¶äº†ï¼Œå…³äºå¤šå±‚çº§åµŒå¥—ç»„ä»¶ä¹‹é—´çš„æ•°æ®äº¤äº’ï¼Œä½ å¯ä»¥ä½¿ç”¨`Vuex`ï¼Œä¹Ÿå¯ä½¿ç”¨ä¸‹æ–‡è®²è§£åˆ°çš„ `tiny-emitter` æ’ä»¶ï¼Œå®ç° Vue2.x ä¸­çš„äº‹ä»¶æ€»çº¿ğŸ‘‡ã€‚

# tiny-emitter/mittå®ç°äº‹ä»¶æ€»çº¿

åœ¨Vue2.xä¸­æˆ‘ä»¬å¦‚æœè¦å®ç°ä¸€ä¸ªäº‹ä»¶æ€»çº¿éå¸¸ç®€å•ï¼š

```
import Vue from "vue"
Vue.prototype.$bus = new Vue();
```

åæœŸåœ¨ç»„ä»¶ä¸­ä½¿ç”¨ `$onã€$emit` è¿›è¡Œäº‹ä»¶çš„ä¾¦å¬å’Œå‘å°„ã€‚

ä½†åœ¨ Vue3 ä¸­ï¼Œä¸èƒ½ç›´æ¥åƒ Vue2.x ä¸€æ ·ç®€å•çš„å®ç°ï¼ŒåŸå› æœ‰ä¸¤ä¸ªï¼š

1. `setup` ä¸­ä¸èƒ½è®¿é—® `this`

2. å®ä¾‹ä¸­å®Œå…¨ç§»é™¤äº† `$on`ã€`$off` å’Œ `$once` æ–¹æ³•ã€‚

   é€šè¿‡ Vue3 çš„ `createApp` åˆ›å»ºå®ä¾‹ï¼Œæ‰“å°ç»“æœä¹Ÿå¯çœ‹åˆ°ï¼Œç§»é™¤äº†ä¸Šè¿° API

   `$emit` ä»ç„¶åŒ…å«äºç°æœ‰çš„ API ä¸­ï¼Œå› ä¸ºå®ƒç”¨äºè§¦å‘ç”±çˆ¶ç»„ä»¶å£°æ˜å¼æ·»åŠ çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚

---

Event bus æ¨¡å¼å¯ä»¥è¢«æ›¿æ¢ä¸ºå®ç°äº†äº‹ä»¶è§¦å‘å™¨æ¥å£çš„å¤–éƒ¨åº“ï¼Œä¾‹å¦‚ [mitt](https://github.com/developit/mitt) æˆ– [tiny-emitter](https://github.com/scottcorgan/tiny-emitter)ã€‚

ç¤ºä¾‹:

```
tiny-emitter
```

```
// eventBus.js
import emitter from 'tiny-emitter/instance'

export default {
  $on: (...args) => emitter.on(...args),
  $once: (...args) => emitter.once(...args),
  $off: (...args) => emitter.off(...args),
  $emit: (...args) => emitter.emit(...args),
}
```

å®ƒæä¾›äº†ä¸ Vue 2 ç›¸åŒçš„äº‹ä»¶è§¦å‘å™¨ APIã€‚

å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨[mitt](https://github.com/developit/mitt)ï¼Œåªä¸è¿‡å…¶æä¾›çš„ API æ²¡æœ‰å®Œå…¨ä¸ Vue2.x ä¿æŒä¸€è‡´ï¼š

- mitt
- all
- on
- off
- emit

